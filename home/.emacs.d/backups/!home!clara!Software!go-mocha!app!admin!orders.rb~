ActiveAdmin.register Order do


  
  actions :index, :show

  index do
    column :business
    column :user
    column :created_at
    column :num_items do |order|
      order.order_items.sum(&:quantity)
    end
    column :price_total
    default_actions
  end

  show do
    attributes_table do
      row :business
      row :user
      table_for order.order_items do
        column 'Items' do |item|
          ("#{item.quantity} #{item.name}s at #{number_to_currency item.price}" +
            "<br />#{item.add_ons.to_s}<br />#{item.notes}" +
            " &mdash; #{number_to_currency item.total}"
            ).html_safe
        end
      end
      row :created_at
      row :price_total
    end
  end

end
