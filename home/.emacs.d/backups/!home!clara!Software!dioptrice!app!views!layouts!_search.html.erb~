    <div id="text-search">
      <strong>Search telescopes:</strong>
      <%= form_tag telescopes_path, :method => 'get' do %>
        <table>
          <tr><td>Full text:</td><td><%= text_field_tag :search,
          params[:search] %></td></tr>
          <tr><td>Include in full text search:</td>
<td>
<%= check_box_tag 'include_maker', 1, (params[:include_maker]) %>Maker<br />
<%= check_box_tag 'include_manufacturer', 1,    (params[:include_manufacturer]) %>Manufacturing Location<br />
<%= check_box_tag 'include_description', 1, (params[:include_description]) %>Description<br />
<%= check_box_tag 'include_signature', 1, (params[:include_signature])%>Signature<br />
<%= check_box_tag 'include_accession', 1, (params[:include_accession])%>Accession<br />
<%= check_box_tag 'include_public_notes', 1, (params[:include_public_notes])%>Public notes
</td>
<tr><td>Look for Blank Fields</td>
<td>
<%= check_box_tag 'blank_maker', 1, (params[:blank_maker]) %>Maker<br />
<%= check_box_tag 'blank_manufacturer', 1,    (params[:blank_manufacturer]) %>Manufacturing Location<br />

</td>
</tr>
          <tr><td>Year
          range:</td><td><div id='rangeslider'></div>
<br />
<div id='rangeval'>1600 - 2014</div>
<input id='yearb' name='year_b' type='hidden'
       value='<%= params[:year_b] ? params[:year_b] : 1600 %>' />
<input id='yeare' name='year_e' type='hidden' 
       value='<%= params[:year_e] ? params[:year_e] : 2014 %>' />
          <tr><td>Length
          range (mm):</td><td><div id='length_rangeslider'></div>
<br />
<div id='length_rangeval'>0 - 2000</div>
<input id='lengthb' name='length_b' type='hidden'
       value='<%= params[:length_b] ? params[:length_b] : 0 %>' />
<input id='lengthe' name='length_e' type='hidden' 
       value='<%= params[:length_e] ? params[:length_e] : 2000 %>' />


<script type='text/javascript'>
$(function(){
 $('#rangeslider').slider({
    range: true,
    min: 1600,
    max: 2014,
    values: [ $('#yearb').val(), $('#yeare').val() ],
    slide: function( event, ui ) {
$('#rangeval').html(ui.values[0]+" - "+ui.values[1]);
$('#yearb').val(ui.values[0]);
$('#yeare').val(ui.values[1]);
}
});
})
$('#rangeval').html($('#yearb').val() + ' - ' + $('#yeare').val());

$(function(){
 $('#length_rangeslider').slider({
    range: true,
    min: 0,
    max: 2000,
values: [ $('#lengthb').val(), $('#lengthe').val() ],
    slide: function( event, ui ) {
$('#length_rangeval').html(ui.values[0]+" - "+ui.values[1]);
$('#lengthb').val(ui.values[0]);
$('#lengthe').val(ui.values[1]);
}
});
})
$('#length_rangeval').html($('#lengthb').val() + ' - ' + $('#lengthe').val());

</script>

</td></tr>
          <tr><td>Category</td><td>
              <% Category.all.sort_by(&:name).each do |c| %>
                <%= check_box_tag 'category_ids[]', c.id, params[:category_ids] && params[:category_ids].include?(c.id.to_s) %> <%= c.name %><br />
                <% end %>
              </td></tr>
          <tr><td>Material</td><td>
              <% Material.all.sort_by(&:name).group_by(&:material_type).each              do |mt, ms| %>
<h3><%= MaterialType.find(mt).name %></h3>
<% ms.each do |m| %>
                <%= check_box_tag 'material_ids[]', m.id,              params[:material_ids] &&              params[:material_ids].include?(m.id.to_s) %> <%= m.name              %><br />
<% end %>
                <% end %>
              </td></tr>

          <tr><td>Collection</td><td>
              <%= select_tag 'collection_id', options_from_collection_for_select(Collection.all.sort_by(&:name), :id, :shorter_name), :include_blank => true %>
              </td></tr>
          <tr><td>Objective type:</td><td><%= select_tag :obj_search,
          options_from_collection_for_select(ObjectiveType.all.sort_by(&:name), :name, :name), :include_blank => true%>
</td></tr>

        </table>
        <%= submit_tag "Search", :name => nil %>
      <% end %>
    </div>
  </div>
